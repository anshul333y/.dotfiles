#!/bin/bash

WALLPAPER_DIR="$HOME/Pictures/Wallpapers"
WALLPAPER=$(find "$WALLPAPER_DIR" -type f \( -iname "*.jpg" -o -iname "*.png" -o -iname "*.jpeg" \) | shuf -n 1)

[ -z "$WALLPAPER" ] && echo "No wallpapers found!" && exit 1

CONFIG="/tmp/hyprpaper.conf"
cat >"$CONFIG" <<EOF
preload = $WALLPAPER
wallpaper = eDP-1,$WALLPAPER
EOF

# Kill any existing hyprpaper process
pkill hyprpaper 2>/dev/null

# Delay just a moment to prevent race conditions
sleep 0.5

# Run Hyprpaper in background
nohup hyprpaper -c "$CONFIG" >/dev/null 2>&1 &
